<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="static/css/style.css"/>
  <title>Maradeur's map</title>
</head>

<body>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="https://cdn.jsdelivr.net/lodash/4.16.6/lodash.min.js"></script>

<input id="from" type="text"/>
<input id="to" type="text"/>

<button onclick="updateNodes()" id="button">Send request</button>

<div id="startLat"></div>
<div id="startLon"></div>

<div id="map">
  <image src="static/img/map.jpg"/>
  <svg>
  </svg>
  <div id="start_label" class="label">text1</div>
  <div id="finish_label" class="label">text2</div>
  <div id="group_504_SE" class="group_label">504_SE!</div>
  <div id="group_503_CS" class="group_label">503_BI!</div>
  <div id="group_504_BI" class="group_label">504_BI!</div>
  <div id="group_603_CS" class="group_label">603_CS!</div>

</div>
<script>
  function updateNodes() {
  var node1 = document.getElementById("from").value;
  var node2 = document.getElementById("to").value;
    getData(node1, node2);
  }
  function getData(node1, node2, path) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', "graph/" + node1 + "/" + node2 + "", true);

    xhr.send();
    xhr.onreadystatechange = function() {
      if (xhr.readyState != 4) return;
      if (!path) {
        drawPath(JSON.parse(xhr.responseText));
      } else {
        drawPath(JSON.parse(xhr.responseText), path);
      }
    }
  }
</script>
<script src="static/js/drawAll.js"></script>

</body>

</html>

